<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="pandoc" />

    
    
    <title>Week 6: Prediction and causality</title>

        <script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
        <script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link href="site_libs/bootstrap-3.3.7/css/bootstrap.min.css" rel="stylesheet" />
        <script src="site_libs/bootstrap-3.3.7/js/bootstrap.min.js"></script>
        <script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
        <script src="site_libs/navigation-1.1/tabsets.js"></script>
        <link href="site_libs/magnific-popup-1.1.0/magnific-popup.css" rel="stylesheet" />
        <script src="site_libs/magnific-popup-1.1.0/jquery.magnific-popup.min.js"></script>
        <link href="site_libs/readthedown-0.1/readthedown.css" rel="stylesheet" />
        <link href="site_libs/readthedown-0.1/readthedown_fonts_embed.css" rel="stylesheet" />
        <script src="site_libs/readthedown-0.1/readthedown.js"></script>
    
    
        <style type="text/css">code{white-space: pre;}</style>
    <style type="text/css">
      pre > code.sourceCode { white-space: pre; position: relative; }
      pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
      pre > code.sourceCode > span:empty { height: 1.2em; }
      .sourceCode { overflow: visible; }
      code.sourceCode > span { color: inherit; text-decoration: inherit; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      pre > code.sourceCode { white-space: pre-wrap; }
      pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
      }
      pre.numberSource code
        { counter-reset: source-line 0; }
      pre.numberSource code > span
        { position: relative; left: -4em; counter-increment: source-line; }
      pre.numberSource code > span > a:first-child::before
        { content: counter(source-line);
          position: relative; left: -1em; text-align: right; vertical-align: baseline;
          border: none; display: inline-block;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
          color: #aaaaaa;
        }
      pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
      div.sourceCode
        {  background-color: #f8f8f8; }
      @media screen {
      pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
      }
      code span.al { color: #ef2929; } /* Alert */
      code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
      code span.at { color: #c4a000; } /* Attribute */
      code span.bn { color: #0000cf; } /* BaseN */
      code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
      code span.ch { color: #4e9a06; } /* Char */
      code span.cn { color: #000000; } /* Constant */
      code span.co { color: #8f5902; font-style: italic; } /* Comment */
      code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
      code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
      code span.dt { color: #204a87; } /* DataType */
      code span.dv { color: #0000cf; } /* DecVal */
      code span.er { color: #a40000; font-weight: bold; } /* Error */
      code span.ex { } /* Extension */
      code span.fl { color: #0000cf; } /* Float */
      code span.fu { color: #000000; } /* Function */
      code span.im { } /* Import */
      code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
      code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
      code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
      code span.ot { color: #8f5902; } /* Other */
      code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
      code span.sc { color: #000000; } /* SpecialChar */
      code span.ss { color: #4e9a06; } /* SpecialString */
      code span.st { color: #4e9a06; } /* String */
      code span.va { color: #000000; } /* Variable */
      code span.vs { color: #4e9a06; } /* VerbatimString */
      code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
    </style>
    
    
    <!-- tabsets -->
    <script>
      $(document).ready(function () {
	  window.buildTabsets("toc");
      });
      $(document).ready(function () {
	  $('.tabset-dropdown > .nav-tabs > li').click(function () {
	      $(this).parent().toggleClass('nav-tabs-open')
	  });
      });
    </script>

    <!-- code folding -->
    
    <!-- code download -->
    
    <!-- tabsets dropdown -->

    <style type="text/css">
      .tabset-dropdown > .nav-tabs {
	  display: inline-table;
	  max-height: 500px;
	  min-height: 44px;
	  overflow-y: auto;
	  background: white;
	  border: 1px solid #ddd;
	  border-radius: 4px;
      }
      
      .tabset-dropdown > .nav-tabs > li.active:before {
	  content: "";
	  font-family: 'Glyphicons Halflings';
	  display: inline-block;
	  padding: 10px;
	  border-right: 1px solid #ddd;
      }
      
      .tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
	  content: "&#xe258;";
	  border: none;
      }
      
      .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
	  content: "";
	  font-family: 'Glyphicons Halflings';
	  display: inline-block;
	  padding: 10px;
	  border-right: 1px solid #ddd;
      }
      
      .tabset-dropdown > .nav-tabs > li.active {
	  display: block;
      }

      .tabset-dropdown > .nav-tabs > li.active a {
  	  padding: 0 15px !important;
      }

      .tabset-dropdown > .nav-tabs > li > a,
      .tabset-dropdown > .nav-tabs > li > a:focus,
      .tabset-dropdown > .nav-tabs > li > a:hover {
	  border: none;
	  display: inline-block;
	  border-radius: 4px;
	  background-color: transparent;
      }
      
      .tabset-dropdown > .nav-tabs.nav-tabs-open > li {
	  display: block;
	  float: none;
      }
      
      .tabset-dropdown > .nav-tabs > li {
	  display: none;
	  margin-left: 0 !important;
      }
    </style>
    
</head>

<body class="preload">

   	
         <!-- readthedown start -->   
   <div id="content" data-toggle="wy-nav-shift">
     <nav id="nav-top" role="navigation" aria-label="top navigation">
       <a role="button" href="#" data-toggle="wy-nav-top"><span class="glyphicon glyphicon-menu-hamburger"></span></a>
     </nav>
         
   
        
      <h1 class="title">Week 6: Prediction and causality</h1>
      
         <!-- readthedown authors -->
   <div id="sidebar">
    <h2><a href="#content">Week 6: Prediction and causality</a></h2>
    <div id="toc">
      <ul>
      <li><a href="#introduction">Introduction</a></li>
      <li><a href="#prediction">Prediction</a></li>
      <li><a href="#causality">Causality</a>
      <ul>
      <li><a href="#example-the-effect-of-media-on-electoral-outcome">Example: The effect of media on electoral outcome</a></li>
      <li><a href="#question-1-mb-demo-10-mins">Question 1 (MB demo, 10 mins)</a></li>
      <li><a href="#answer-1">Answer 1</a></li>
      <li><a href="#question-2-breakout-room-20-mins">Question 2 (Breakout room, 20 mins)</a></li>
      <li><a href="#answer-2">Answer 2</a></li>
      <li><a href="#question-3-breakout-rooms-20-mins">Question 3 (Breakout rooms, 20 mins)</a></li>
      <li><a href="#answer-3">Answer 3</a></li>
      <li><a href="#question-4-breakout-room-15-mins">Question 4 (Breakout room, 15 mins)</a></li>
      <li><a href="#answer-4">Answer 4</a></li>
      </ul></li>
      </ul>
    </div>
    <div id="postamble" data-toggle="wy-nav-shift" class="status">
                </div>
   </div>
     

   
      
   
<!-- Don't indent these lines or it will mess pre blocks indentation --> 
<div id="main">
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<ul>
<li>What are the aims of regression?
<ul>
<li>Regression for prediction</li>
<li>Regression for causal analysis</li>
</ul></li>
</ul>
</div>
<div id="prediction" class="section level1">
<h1>Prediction</h1>
</div>
<div id="causality" class="section level1">
<h1>Causality</h1>
<div id="example-the-effect-of-media-on-electoral-outcome" class="section level2">
<h2>Example: The effect of media on electoral outcome</h2>
<ul>
<li>This example (including dataset and much of the notes) comes from Matthew Blackwell’s Gov-51 course (<a href="http://gov50.mattblackwell.org/weeks/02-observational/" class="uri">http://gov50.mattblackwell.org/weeks/02-observational/</a>)</li>
</ul>
<p>Can the media persuade people to vote differently? This is a really hard problem to investigate from a causal perspective since people choose their media based on their political preferences. So liberals choose to watch MSNBC or read the New York Times and conservatives choose to watch Fox News or read the Wall Street Journal. We could do a lab experiment, but there would be concerns about external validity.</p>
<p>Two political scientists tried to get around this problem by focusing on a particular moment in UK politics. The data for this exercise comes from this paper:</p>
<blockquote>
<p>Ladd, Jonathan M., and Gabriel S. Lenz. “Exploiting a Rare Communication Shift to Document the Persuasive Power of the News Media.” American Journal of Political Science 53, no. 2 (2009): 394–410. <a href="https://www.jstor.org/stable/25548125">https://www.jstor.org/stable/25548125</a></p>
</blockquote>
<p>Four newspapers in the UK changed their editorial stance and tone between the 1992 and 1997 from supporting the Conservative Party to supporting the Labour Party. Switching papers were largely seen as a surprise to the public. The data, contained in the <code>newspapers.csv</code> file contains the following variables:</p>
<table>
<colgroup>
<col width="13%" />
<col width="86%" />
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>to_labour</code></td>
<td>Did respondent read a newspaper that switched endorsement to the Labour between 1992 and 1997 (1=Yes, 0=No)?</td>
</tr>
<tr class="even">
<td><code>vote_lab_92</code></td>
<td>Did respondent vote for Labour in 1992 election (1=Yes, 0=No)?</td>
</tr>
<tr class="odd">
<td><code>vote_lab_97</code></td>
<td>Did respondent vote for Labour in 1997 election (1=Yes, 0=No)?</td>
</tr>
<tr class="even">
<td><code>parent_labour</code></td>
<td>Did the respondent’s parents vote for Labour (1=Yes, 0=No)?</td>
</tr>
<tr class="odd">
<td><code>wkclass</code></td>
<td>Does the respondent identify as working class (1=Yes, 0=No)?</td>
</tr>
<tr class="even">
<td><code>male</code></td>
<td>Does the respondent identify as Male (1=Yes, 0=No)?</td>
</tr>
<tr class="odd">
<td><code>age</code></td>
<td>Age of respondent</td>
</tr>
</tbody>
</table>
<p>The treatment here is someone reading a paper that switched their endorsement. The outcome of interest is how the respondent voted in 1997.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>news <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/newspapers.csv&quot;</span>)</span></code></pre></div>
</div>
<div id="question-1-mb-demo-10-mins" class="section level2">
<h2>Question 1 (MB demo, 10 mins)</h2>
<p>Calculate the average treatment effect of reading a switching to Labour paper on voting for Labour in 1997 under a cross-sectional design.</p>
</div>
<div id="answer-1" class="section level2">
<h2>Answer 1</h2>
<ul>
<li><strong>Question</strong>: How do we estimate the ATE in a cross-sectional design? Without controls, no different than a randomized experiment.</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>switched <span class="ot">&lt;-</span> <span class="fu">subset</span>(news, <span class="at">subset =</span> to_labour <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>no_change <span class="ot">&lt;-</span> <span class="fu">subset</span>(news, <span class="at">subset =</span> to_labour <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>ate <span class="ot">&lt;-</span> <span class="fu">mean</span>(switched<span class="sc">$</span>vote_lab_97) <span class="sc">-</span> <span class="fu">mean</span>(no_chage<span class="sc">$</span>vote_lab_97)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>ate</span></code></pre></div>
<p>Using a cross-sectional design with no statistical control, the estimated average treatment effect is “r round(ate, digits = 2)”.</p>
<ul>
<li><p><strong>Question:</strong> how is the analysis of a cross-sectional design different than the analysis of a randomized experiment?</p></li>
<li><p><strong>Question:</strong> why might we not believe this estimate of the ATE?</p></li>
<li><p>If more liberal people were more likely to read the NYT, what kind of cross-sectional estimate would we expect? How would we expect the estimate to change if we looked at the effect among liberals? <strong>Use yes/no to vote on what direction the effect would go.</strong></p></li>
</ul>
</div>
<div id="question-2-breakout-room-20-mins" class="section level2">
<h2>Question 2 (Breakout room, 20 mins)</h2>
<p>Choose one of the binary pretreatment variable to do a balance check. Compare the sample proportions of that variable across the treated and control groups. Come up with a story for how the confounding might occur for this variable. That is, how do you expect the confounder to affect both the treatment and the outcome in this case?</p>
<p>Nest, use the method of subclassification to statistically control for this variable and estimate the treatment effect within levels of that variable. Do the effects in each group look similar to the overall ATE?</p>
<p><strong>Challenge question:</strong> do the quantitative results from these two exercises seem to validate your story for the confounding bias?</p>
<p>See QSS Section 2.5.2 for more information if you need it.</p>
</div>
<div id="answer-2" class="section level2">
<h2>Answer 2</h2>
<ul>
<li>Compare the sample proportions of men in the treated and control groups:</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(switched<span class="sc">$</span>male)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(no_change<span class="sc">$</span>male)</span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>switched_males <span class="ot">&lt;-</span> switched[switched<span class="sc">$</span>male <span class="sc">==</span> <span class="dv">1</span>,]</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>no_change_males <span class="ot">&lt;-</span> no_change[no_change<span class="sc">$</span>male <span class="sc">==</span> <span class="dv">1</span>,]</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(switched_males<span class="sc">$</span>vote_lab_97) <span class="sc">-</span> <span class="fu">mean</span>(no_change_males<span class="sc">$</span>vote_lab_97)</span></code></pre></div>
<ul>
<li>For women:</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>switched_females <span class="ot">&lt;-</span> switched[switched<span class="sc">$</span>male <span class="sc">==</span> <span class="dv">0</span>,]</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>no_change_females <span class="ot">&lt;-</span> no_change[no_change<span class="sc">$</span>male <span class="sc">==</span> <span class="dv">0</span>,]</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(switched_females<span class="sc">$</span>vote_lab_97) <span class="sc">-</span> <span class="fu">mean</span>(no_change_females<span class="sc">$</span>vote_lab_97)</span></code></pre></div>
<ul>
<li>Pick one group to present their results.</li>
<li>What about variables that we didn’t measure?</li>
</ul>
</div>
<div id="question-3-breakout-rooms-20-mins" class="section level2">
<h2>Question 3 (Breakout rooms, 20 mins)</h2>
<p>This data set is a panel data set since we have measurements on the same individuals at two different time points. This allows us to conduct new types of observational studies. Review section 2.5.3 of QSS and conduct two analyses on this data set:</p>
<ol style="list-style-type: decimal">
<li>A before-and-after comparison of the treated group, comparing their average vote in 1997 to their average vote in 1992.</li>
<li>A differences-in-differences design that compares the average changes over time in the treatment group to average changes over time in the control group.</li>
</ol>
<p>How do these estimates compare to the cross-sectional design? For both of these methods, come up with one possible source of bias. Which of the three methods do you find the most plausible for inferring causal effects?</p>
</div>
<div id="answer-3" class="section level2">
<h2>Answer 3</h2>
<div id="before-and-after-comparison" class="section level3">
<h3>Before-and-after comparison</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>switched_diff <span class="ot">&lt;-</span> <span class="fu">mean</span>(switched<span class="sc">$</span>vote_lab_97) <span class="sc">-</span> <span class="fu">mean</span>(switched<span class="sc">$</span>vote_lab_92)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>switched_diff</span></code></pre></div>
</div>
<div id="differences-in-differences" class="section level3">
<h3>Differences-in-differences</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>no_change_diff <span class="ot">&lt;-</span> <span class="fu">mean</span>(no_change<span class="sc">$</span>vote_lab_97) <span class="sc">-</span> <span class="fu">mean</span>(no_change<span class="sc">$</span>vote_lab_92)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>switched_diff <span class="sc">-</span> no_change_diff</span></code></pre></div>
<ul>
<li>Pick one group to share.</li>
<li>What are the assumptions that make a before-and-after design valid?
<ul>
<li>Tony Blair very popular across the board.</li>
</ul></li>
<li>What are the assumptions that make a differences-in-differences design valid?</li>
<li>Are these assumptions plausible in this case?</li>
<li>Final thing: <strong>we always rely on assumptions to make observational studies causally valid</strong></li>
</ul>
</div>
</div>
<div id="question-4-breakout-room-15-mins" class="section level2">
<h2>Question 4 (Breakout room, 15 mins)</h2>
<p>With continuous covariates, we might want to check different aspects of the distribution of the data are different in the treated and control group.</p>
<ol style="list-style-type: decimal">
<li>Compare the summary statistics from a <code>summary()</code> call on the <code>age</code> variable in the treated and control group. If we were worried about confounding bias from age, what should we expect to see in this comparison? What do you actually see?</li>
<li>Compare the standard deviation of <code>age</code> in the two groups. What does this comparison tell us?</li>
</ol>
</div>
<div id="answer-4" class="section level2">
<h2>Answer 4</h2>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(switched<span class="sc">$</span>age)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(no_change<span class="sc">$</span>age)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(switched<span class="sc">$</span>age)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(no_change<span class="sc">$</span>age)</span></code></pre></div>
<ul>
<li>What does it mean for one group to have a higher standard deviation of age than another group?</li>
<li>Is it possible for an SD to be negative?</li>
<li>Is it possible for an SD to be zero? What would that mean?</li>
</ul>
</div>
</div>
</div>

   
   
            
      

  <script>
    $(document).ready(function () {

			
 		
	    });
  </script>



    <!-- dynamically load mathjax for compatibility with self-contained -->
  <script>
    (function () {
	var script = document.createElement("script");
	script.type = "text/javascript";
	script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
	document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>
  
</body>
</html>
