---
title: Troubleshooting R in class
author: "Dr. Chris Moreh<br> York St. John University"
date: "Last compiled on `r format(Sys.time(), ' %A %d %B, %Y')`"
output: 
  html_document:
    toc: true
    toc_float: true
    toc_depth: 2
---

```{r include=FALSE}
knitr::opts_chunk$set(eval = FALSE, include = TRUE)
```

This is a live document that catalogues the various technical and programming issues that emerged during the computer labs and proposes solutions for them. Many of these issues emerge from a lack of administrator rights on campus computers, which makes direct troubleshooting more difficult. The issues identified here and the solutions proposed may, however, be useful more generally in the future as well.

### \#1 Installing packages requires administrator rights

The first issue I ran into was an error when attempting to install `R` packages because I did not have the necessary file permissions to be able to write to the default R library folder stored on the C: drive. This is a documented issue on the Microsoft Windows support page ([see here](https://support.microsoft.com/en-us/topic/general-problem-installing-any-r-package-0bf1f9ba-ead2-6335-46ec-190f6af75e44)) and it pops up often on the [StackOverflow](https://stackoverflow.com/tags) tech user forum. Error messages can often be cryptic, but for this particular issue you would see something like this:

<!--# This is a comment -->

    The downloaded source packages are in
    ?/tmp/Rtmph4YKLX/downloaded_packages?
    Updating HTML index of packages in '.Library'
    Warning in install.packages :
    cannot create file
    '/opt/POC/lib64/Revo-7.3/R-3.1.1/lib64/R/doc/html/packages.html', reason
    'Permission denied'

One solution is to create a new folder on a directory available to you (e.g. the OneDrive directory) where to save the new packages. You can create a new folder manually, or directly in R. Say you want to store your R packages in a sub-folder called 'myRlib' within the folder 'SSC7001M' that you already created for this course on the institutional OneDrive. In R you can do this:

```{r}
dir.create("C:/Users/c.moreh/OneDrive - York St John University/SSC7001M/myRlib") ## obviously, change the path to your own
```

If you have created the folder manually, you can skip the previous step. The next option step is to actually check where the default library is currently located, just to have an idea:

```{r eval=FALSE, include=TRUE}
.libPaths() 
## this command will list the paths to your default directories
```

To actually make the change from the default library to the one of your choice, these are the next steps:

```{r}
# Take the information about the path to the default library (i.e. the text generated by the ".libPaths()" commad) and save it as an object (say, one called 'myPaths') in your R environment so you can perform actions with it:

myPaths <- .libPaths()

# Next, add another line to that text object with the path to your accessible folder:

myPaths <- c("C:/Users/c.moreh/OneDrive - York St John University/SSC7001M/myRlib", myPaths) ## obviously, change the path to your own

# Finally, add this new information to ".libPaths()" to change it:
.libPaths(myPaths)
```

Once this is done, you can install new packages and you will see your packages saved into your folder. That's the folder from where `R` will also load the packages when you instruct it to do so. One problem to keep in mind is that this setting is only valid for your current `R` session; in other words, whenever you re-start `R` you will need to quickly change the default directory to your personal *myRlib* folder.
